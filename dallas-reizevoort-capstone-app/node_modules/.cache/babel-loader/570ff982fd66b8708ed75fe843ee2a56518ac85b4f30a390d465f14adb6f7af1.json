{"ast":null,"code":"var _jsxFileName = \"/Users/dallas/BrainStation/dallas-reizevoort-capstone/dallas-reizevoort-capstone-app/src/components/Mood/Mood.js\",\n  _s = $RefreshSig$();\nimport React, { useRef } from 'react';\nimport * as d3 from 'd3';\nimport SpotifyWebApi from \"spotify-web-api-node\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Mood({\n  accessToken\n}) {\n  _s();\n  const ref = useRef();\n  const spotifyApi = useRef(new SpotifyWebApi({\n    clientId: \"6ba0cc8b29e145ea99f2401c09a35e6e\"\n  }));\n\n  // Fetch the user's listening history\n  spotifyApi.current.getMyRecentlyPlayedTracks({\n    limit: 50\n  }).then(response => {\n    const tracks = response.body.items;\n\n    // Get the audio features for these tracks\n    return spotifyApi.current.getAudioFeaturesForTracks(tracks.map(track => track.track.id));\n  }).then(response => {\n    const audioFeatures = response.body.audio_features;\n\n    // Store the mood data in a time-series format\n    const moodData = audioFeatures.map((features, index) => ({\n      date: new Date().getTime() - index * 1000 * 60 * 60 * 24,\n      // This is a placeholder. You should use the actual play time of each track.\n      valence: features.valence\n    }));\n\n    // Map the valence to a mood category\n    const moodCategory = valence => valence < 0.33 ? 'Sad' : valence < 0.66 ? 'Neutral' : 'Happy';\n    moodData.forEach(d => {\n      d.mood = moodCategory(d.valence);\n    });\n\n    // Create the line chart with D3.js\n    const svg = d3.select(ref.current);\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 50,\n      left: 50\n    };\n    const width = 960 - margin.left - margin.right;\n    const height = 500 - margin.top - margin.bottom;\n    const xScale = d3.scaleTime().domain(d3.extent(moodData, d => d.date)).range([0, width]);\n    const yScale = d3.scaleLinear().domain([0, 1]).range([height, 0]);\n    const line = d3.line().x(d => xScale(d.date)).y(d => yScale(d.valence));\n    const g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n    g.append('g').attr('transform', 'translate(0,' + height + ')').call(d3.axisBottom(xScale)).append('text').attr('fill', '#fff').attr('y', 20).attr('x', width / 2).attr('dy', '0.71em').attr('text-anchor', 'end').text('Time');\n    g.append('g').call(d3.axisLeft(yScale)).append('text').attr('fill', '#fff').attr('transform', 'rotate(-90)').attr('y', -40).attr('dy', '0.71em').attr('text-anchor', 'end').text('Mood (valence)');\n    g.append('path').datum(moodData).attr('fill', 'none').attr('stroke', 'steelblue').attr('stroke-width', 1.5).attr('d', line);\n    svg.append('text').attr('x', width / 2).attr('y', 20).attr('text-anchor', 'middle').style('font-size', '20px').style('text-decoration', 'underline').style('fill', '#fff').text('Mood Over Time');\n\n    // Add mood labels\n    g.selectAll('.mood-label').data(moodData).enter().append('text').attr('class', 'mood-label').attr('x', d => xScale(d.date)).attr('y', d => yScale(d.valence)).attr('dy', '-1em').attr('fill', d => d.mood === 'Happy' ? 'green' : d.mood === 'Neutral' ? 'yellow' : 'red').text(d => d.mood);\n\n    // Add tooltips\n    const tooltip = d3.select('body').append('div').style('position', 'absolute').style('z-index', '10').style('visibility', 'hidden').style('background', '#333').style('border-radius', '5px').style('color', '#fff').style('padding', '10px').style('opacity', '0.7').text('a simple tooltip');\n    g.selectAll('.mood-label').on('mouseover', function (d) {\n      tooltip.text(`Mood: ${d.mood}, Valence: ${d.valence}`);\n      return tooltip.style('visibility', 'visible');\n    }).on('mousemove', function () {\n      return tooltip.style('top', d3.event.pageY - 10 + 'px').style('left', d3.event.pageX + 10 + 'px');\n    }).on('mouseout', function () {\n      return tooltip.style('visibility', 'hidden');\n    });\n\n    // Add zoom functionality\n    const zoom = d3.zoom().scaleExtent([1, 10]).translateExtent([[0, 0], [width, height]]).on('zoom', zoomed);\n    svg.call(zoom);\n    function zoomed() {\n      g.attr('transform', d3.event.transform);\n    }\n  }).catch(err => {\n    console.error('Something went wrong:', err);\n  });\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: ref,\n    width: \"960\",\n    height: \"500\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 12\n  }, this);\n}\n_s(Mood, \"EBNTxZUSllMniIzdGCiE0EL5IV4=\");\n_c = Mood;\nexport default Mood;\nvar _c;\n$RefreshReg$(_c, \"Mood\");","map":{"version":3,"names":["React","useRef","d3","SpotifyWebApi","jsxDEV","_jsxDEV","Mood","accessToken","_s","ref","spotifyApi","clientId","current","getMyRecentlyPlayedTracks","limit","then","response","tracks","body","items","getAudioFeaturesForTracks","map","track","id","audioFeatures","audio_features","moodData","features","index","date","Date","getTime","valence","moodCategory","forEach","d","mood","svg","select","margin","top","right","bottom","left","width","height","xScale","scaleTime","domain","extent","range","yScale","scaleLinear","line","x","y","g","append","attr","call","axisBottom","text","axisLeft","datum","style","selectAll","data","enter","tooltip","on","event","pageY","pageX","zoom","scaleExtent","translateExtent","zoomed","transform","catch","err","console","error","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/dallas/BrainStation/dallas-reizevoort-capstone/dallas-reizevoort-capstone-app/src/components/Mood/Mood.js"],"sourcesContent":["import React, { useRef } from 'react';\nimport * as d3 from 'd3';\nimport SpotifyWebApi from \"spotify-web-api-node\";\n\nfunction Mood({ accessToken }) {\n    const ref = useRef();\n    const spotifyApi = useRef(\n      new SpotifyWebApi({\n        clientId: \"6ba0cc8b29e145ea99f2401c09a35e6e\",\n      })\n    );\n\n    // Fetch the user's listening history\n    spotifyApi.current.getMyRecentlyPlayedTracks({ limit: 50 })\n        .then(response => {\n            const tracks = response.body.items;\n\n            // Get the audio features for these tracks\n            return spotifyApi.current.getAudioFeaturesForTracks(tracks.map(track => track.track.id));\n        })\n        .then(response => {\n            const audioFeatures = response.body.audio_features;\n\n            // Store the mood data in a time-series format\n            const moodData = audioFeatures.map((features, index) => ({\n                date: new Date().getTime() - index * 1000 * 60 * 60 * 24, // This is a placeholder. You should use the actual play time of each track.\n                valence: features.valence\n            }));\n\n            // Map the valence to a mood category\n            const moodCategory = valence => valence < 0.33 ? 'Sad' : valence < 0.66 ? 'Neutral' : 'Happy';\n            moodData.forEach(d => {\n                d.mood = moodCategory(d.valence);\n            });\n\n            // Create the line chart with D3.js\n            const svg = d3.select(ref.current);\n            const margin = {top: 20, right: 20, bottom: 50, left: 50};\n            const width = 960 - margin.left - margin.right;\n            const height = 500 - margin.top - margin.bottom;\n\n            const xScale = d3.scaleTime().domain(d3.extent(moodData, d => d.date)).range([0, width]);\n            const yScale = d3.scaleLinear().domain([0, 1]).range([height, 0]);\n\n            const line = d3.line().x(d => xScale(d.date)).y(d => yScale(d.valence));\n\n            const g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n            g.append('g')\n                .attr('transform', 'translate(0,' + height + ')')\n                .call(d3.axisBottom(xScale))\n                .append('text')\n                .attr('fill', '#fff')\n                .attr('y', 20)\n                .attr('x', width / 2)\n                .attr('dy', '0.71em')\n                .attr('text-anchor', 'end')\n                .text('Time');\n\n            g.append('g')\n                .call(d3.axisLeft(yScale))\n                .append('text')\n                .attr('fill', '#fff')\n                .attr('transform', 'rotate(-90)')\n                .attr('y', -40)\n                .attr('dy', '0.71em')\n                .attr('text-anchor', 'end')\n                .text('Mood (valence)');\n\n            g.append('path')\n                .datum(moodData)\n                .attr('fill', 'none')\n                .attr('stroke', 'steelblue')\n                .attr('stroke-width', 1.5)\n                .attr('d', line);\n\n            svg.append('text')\n                .attr('x', (width / 2))             \n                .attr('y', 20)\n                .attr('text-anchor', 'middle')  \n                .style('font-size', '20px') \n                .style('text-decoration', 'underline')  \n                .style('fill', '#fff')\n                .text('Mood Over Time');\n\n            // Add mood labels\n            g.selectAll('.mood-label')\n                .data(moodData)\n                .enter()\n                .append('text')\n                .attr('class', 'mood-label')\n                .attr('x', d => xScale(d.date))\n                .attr('y', d => yScale(d.valence))\n                .attr('dy', '-1em')\n                .attr('fill', d => d.mood === 'Happy' ? 'green' : d.mood === 'Neutral' ? 'yellow' : 'red')\n                .text(d => d.mood);\n\n            // Add tooltips\n            const tooltip = d3.select('body').append('div')\n                .style('position', 'absolute')\n                .style('z-index', '10')\n                .style('visibility', 'hidden')\n                .style('background', '#333')\n                .style('border-radius', '5px')\n                .style('color', '#fff')\n                .style('padding', '10px')\n                .style('opacity', '0.7')\n                .text('a simple tooltip');\n\n            g.selectAll('.mood-label')\n                .on('mouseover', function(d) {\n                    tooltip.text(`Mood: ${d.mood}, Valence: ${d.valence}`);\n                    return tooltip.style('visibility', 'visible');\n                })\n                .on('mousemove', function() {\n                    return tooltip.style('top', (d3.event.pageY-10)+'px').style('left',(d3.event.pageX+10)+'px');\n                })\n                .on('mouseout', function(){return tooltip.style('visibility', 'hidden');});\n\n            // Add zoom functionality\n            const zoom = d3.zoom()\n                .scaleExtent([1, 10])\n                .translateExtent([[0, 0], [width, height]])\n                .on('zoom', zoomed);\n\n            svg.call(zoom);\n\n            function zoomed() {\n                g.attr('transform', d3.event.transform);\n            }\n        })\n        .catch(err => {\n            console.error('Something went wrong:', err);\n        });\n\n    return <svg ref={ref} width=\"960\" height=\"500\" />;\n}\n\nexport default Mood;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
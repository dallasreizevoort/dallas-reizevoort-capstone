{"ast":null,"code":"var _jsxFileName = \"/Users/dallas/BrainStation/dallas-reizevoort-capstone/dallas-reizevoort-capstone-app/src/components/Mood/Mood.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport SpotifyWebApi from \"spotify-web-api-node\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Mood({\n  accessToken\n}) {\n  _s();\n  const ref = useRef();\n  const spotifyApi = useRef(new SpotifyWebApi({\n    clientId: \"6ba0cc8b29e145ea99f2401c09a35e6e\"\n  }));\n  useEffect(() => {\n    if (!accessToken) return;\n    spotifyApi.current.setAccessToken(accessToken);\n    spotifyApi.current.getMyRecentlyPlayedTracks({\n      limit: 50\n    }).then(response => {\n      const trackIds = response.body.items.map(item => item.track.id);\n      return spotifyApi.current.getAudioFeaturesForTracks(trackIds);\n    }).then(response => {\n      const audioFeatures = response.body.audio_features;\n      const moodData = audioFeatures.map((features, index) => ({\n        date: new Date().getTime() - index * 1000 * 60 * 60 * 24,\n        // This is a placeholder. You should use the actual play time of each track.\n        valence: features.valence\n      }));\n      const moodCategory = valence => valence < 0.33 ? \"Sad\" : valence < 0.66 ? \"Neutral\" : \"Happy\";\n      moodData.forEach(d => {\n        d.mood = moodCategory(d.valence);\n      });\n      const svg = d3.select(ref.current);\n      const margin = {\n        top: 20,\n        right: 20,\n        bottom: 50,\n        left: 50\n      };\n      const width = 350 - margin.left - margin.right;\n      const height = 500 - margin.top - margin.bottom;\n      const xScale = d3.scaleTime().domain(d3.extent(moodData, d => d.date)).range([0, width]);\n      const yScale = d3.scaleLinear().domain([0, 1]).range([height, 0]);\n      const line = d3.line().x(d => xScale(d.date)).y(d => yScale(d.valence));\n      const g = svg.append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n      g.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").call(d3.axisBottom(xScale)).append(\"text\").attr(\"fill\", \"#fff\").attr(\"y\", 20).attr(\"x\", width / 2).attr(\"dy\", \"0.71em\").attr(\"text-anchor\", \"end\").text(\"Time\");\n      g.append(\"g\").call(d3.axisLeft(yScale)).append(\"text\").attr(\"fill\", \"#fff\").attr(\"transform\", \"rotate(-90)\").attr(\"y\", -40).attr(\"dy\", \"0.71em\").attr(\"text-anchor\", \"end\").text(\"Mood (valence)\");\n      g.append(\"path\").datum(moodData).attr(\"fill\", \"none\").attr(\"stroke\", \"steelblue\").attr(\"stroke-width\", 1.5).attr(\"d\", line);\n      svg.append(\"text\").attr(\"x\", width / 2).attr(\"y\", 20).attr(\"text-anchor\", \"middle\").style(\"font-size\", \"20px\").style(\"text-decoration\", \"underline\").style(\"fill\", \"#fff\").text(\"Mood Over Time\");\n      const tooltip = d3.select(\"body\").append(\"div\").style(\"position\", \"absolute\").style(\"z-index\", \"10\").style(\"visibility\", \"hidden\").style(\"background\", \"#333\").style(\"border-radius\", \"5px\").style(\"color\", \"#fff\").style(\"padding\", \"10px\").style(\"opacity\", \"0.7\").text(\"a simple tooltip\");\n      g.selectAll(\".mood-label\").on(\"mouseover\", function (d) {\n        tooltip.text(`Mood: ${d.mood}, Valence: ${d.valence}`);\n        return tooltip.style(\"visibility\", \"visible\");\n      }).on(\"mousemove\", function (event) {\n        return tooltip.style(\"top\", event.pageY - 10 + \"px\").style(\"left\", event.pageX + 10 + \"px\");\n      }).on(\"mouseout\", function () {\n        return tooltip.style(\"visibility\", \"hidden\");\n      });\n    }).catch(err => {\n      console.error(\"Something went wrong:\", err);\n    });\n  }, [accessToken]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: ref,\n    width: \"525\",\n    height: \"550\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 10\n  }, this);\n}\n_s(Mood, \"DPQ0+wisHBllscv5YB3Te63pQiY=\");\n_c = Mood;\nexport default Mood;\nvar _c;\n$RefreshReg$(_c, \"Mood\");","map":{"version":3,"names":["React","useEffect","useRef","d3","SpotifyWebApi","jsxDEV","_jsxDEV","Mood","accessToken","_s","ref","spotifyApi","clientId","current","setAccessToken","getMyRecentlyPlayedTracks","limit","then","response","trackIds","body","items","map","item","track","id","getAudioFeaturesForTracks","audioFeatures","audio_features","moodData","features","index","date","Date","getTime","valence","moodCategory","forEach","d","mood","svg","select","margin","top","right","bottom","left","width","height","xScale","scaleTime","domain","extent","range","yScale","scaleLinear","line","x","y","g","append","attr","call","axisBottom","text","axisLeft","datum","style","tooltip","selectAll","on","event","pageY","pageX","catch","err","console","error","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/dallas/BrainStation/dallas-reizevoort-capstone/dallas-reizevoort-capstone-app/src/components/Mood/Mood.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport * as d3 from \"d3\";\nimport SpotifyWebApi from \"spotify-web-api-node\";\n\nfunction Mood({ accessToken }) {\n  const ref = useRef();\n  const spotifyApi = useRef(\n    new SpotifyWebApi({\n      clientId: \"6ba0cc8b29e145ea99f2401c09a35e6e\",\n    })\n  );\n\n  useEffect(() => {\n    if (!accessToken) return;\n    spotifyApi.current.setAccessToken(accessToken);\n    spotifyApi.current\n      .getMyRecentlyPlayedTracks({ limit: 50 })\n      .then((response) => {\n        const trackIds = response.body.items.map(item => item.track.id);\n        return spotifyApi.current.getAudioFeaturesForTracks(trackIds);\n        })\n        .then((response) => {\n    const audioFeatures = response.body.audio_features;\n\n        const moodData = audioFeatures.map((features, index) => ({\n          date: new Date().getTime() - index * 1000 * 60 * 60 * 24, // This is a placeholder. You should use the actual play time of each track.\n          valence: features.valence,\n        }));\n\n        const moodCategory = (valence) =>\n          valence < 0.33 ? \"Sad\" : valence < 0.66 ? \"Neutral\" : \"Happy\";\n        moodData.forEach((d) => {\n          d.mood = moodCategory(d.valence);\n        });\n\n        const svg = d3.select(ref.current);\n        const margin = { top: 20, right: 20, bottom: 50, left: 50 };\n        const width = 350 - margin.left - margin.right;\n        const height = 500 - margin.top - margin.bottom;\n\n        const xScale = d3\n          .scaleTime()\n          .domain(d3.extent(moodData, (d) => d.date))\n          .range([0, width]);\n        const yScale = d3.scaleLinear().domain([0, 1]).range([height, 0]);\n\n        const line = d3\n          .line()\n          .x((d) => xScale(d.date))\n          .y((d) => yScale(d.valence));\n\n        const g = svg\n          .append(\"g\")\n          .attr(\n            \"transform\",\n            \"translate(\" + margin.left + \",\" + margin.top + \")\"\n          );\n\n        g.append(\"g\")\n          .attr(\"transform\", \"translate(0,\" + height + \")\")\n          .call(d3.axisBottom(xScale))\n          .append(\"text\")\n          .attr(\"fill\", \"#fff\")\n          .attr(\"y\", 20)\n          .attr(\"x\", width / 2)\n          .attr(\"dy\", \"0.71em\")\n          .attr(\"text-anchor\", \"end\")\n          .text(\"Time\");\n\n        g.append(\"g\")\n          .call(d3.axisLeft(yScale))\n          .append(\"text\")\n          .attr(\"fill\", \"#fff\")\n          .attr(\"transform\", \"rotate(-90)\")\n          .attr(\"y\", -40)\n          .attr(\"dy\", \"0.71em\")\n          .attr(\"text-anchor\", \"end\")\n          .text(\"Mood (valence)\");\n\n        g.append(\"path\")\n          .datum(moodData)\n          .attr(\"fill\", \"none\")\n          .attr(\"stroke\", \"steelblue\")\n          .attr(\"stroke-width\", 1.5)\n          .attr(\"d\", line);\n\n        svg\n          .append(\"text\")\n          .attr(\"x\", width / 2)\n          .attr(\"y\", 20)\n          .attr(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"20px\")\n          .style(\"text-decoration\", \"underline\")\n          .style(\"fill\", \"#fff\")\n          .text(\"Mood Over Time\");\n\n        const tooltip = d3.select(\"body\").append(\"div\")\n          .style(\"position\", \"absolute\")\n          .style(\"z-index\", \"10\")\n          .style(\"visibility\", \"hidden\")\n          .style(\"background\", \"#333\")\n          .style(\"border-radius\", \"5px\")\n          .style(\"color\", \"#fff\")\n          .style(\"padding\", \"10px\")\n          .style(\"opacity\", \"0.7\")\n          .text(\"a simple tooltip\");\n\n        g.selectAll(\".mood-label\")\n          .on(\"mouseover\", function (d) {\n            tooltip.text(`Mood: ${d.mood}, Valence: ${d.valence}`);\n            return tooltip.style(\"visibility\", \"visible\");\n          })\n          .on(\"mousemove\", function (event) {\n            return tooltip\n              .style(\"top\", event.pageY - 10 + \"px\")\n              .style(\"left\", event.pageX + 10 + \"px\");\n          })\n          .on(\"mouseout\", function () {\n            return tooltip.style(\"visibility\", \"hidden\");\n          });\n      })\n      .catch((err) => {\n        console.error(\"Something went wrong:\", err);\n      });\n  }, [accessToken]);\n\n  return <svg ref={ref} width=\"525\" height=\"550\" />;\n}\n\nexport default Mood;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
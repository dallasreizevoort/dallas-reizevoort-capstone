{"ast":null,"code":"var _jsxFileName = \"/Users/dallas/BrainStation/dallas-reizevoort-capstone/dallas-reizevoort-capstone-app/src/components/SpotifyPlayer/SpotifyPlayer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport SpotifyWebApi from 'spotify-web-api-node';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SpotifyPlayer({\n  accessToken,\n  trackId\n}) {\n  _s();\n  const [sdkReady, setSdkReady] = useState(false);\n  const [playerState, setPlayerState] = useState(null);\n  const [deviceId, setDeviceId] = useState(null);\n  const spotifyApi = useRef(null);\n  const player = useRef(null);\n  useEffect(() => {\n    // Load Spotify Web Playback SDK\n    const scriptTag = document.createElement('script');\n    scriptTag.src = 'https://sdk.scdn.co/spotify-player.js';\n    scriptTag.async = true;\n    scriptTag.onload = () => setSdkReady(true);\n    document.body.appendChild(scriptTag);\n\n    // Define the global function that the SDK calls when it's ready\n    window.onSpotifyWebPlaybackSDKReady = () => {\n      console.log('Spotify Web Playback SDK ready');\n    };\n  }, []);\n  useEffect(() => {\n    if (!accessToken || !sdkReady) return;\n    spotifyApi.current = new SpotifyWebApi();\n    spotifyApi.current.setAccessToken(accessToken);\n\n    // Create a new player\n    player.current = new window.Spotify.Player({\n      name: 'Web Playback SDK Player',\n      getOAuthToken: cb => {\n        cb(accessToken);\n      }\n    });\n\n    // Error handling\n    player.current.addListener('initialization_error', ({\n      message\n    }) => {\n      console.error(message);\n    });\n    player.current.addListener('authentication_error', ({\n      message\n    }) => {\n      console.error(message);\n    });\n    player.current.addListener('account_error', ({\n      message\n    }) => {\n      console.error(message);\n    });\n    player.current.addListener('playback_error', ({\n      message\n    }) => {\n      console.error(message);\n    });\n\n    // Playback status updates\n    player.current.addListener('player_state_changed', state => {\n      console.log(state);\n      setPlayerState(state);\n    });\n\n    // Ready\n    player.current.addListener('ready', ({\n      device_id\n    }) => {\n      console.log('Ready with Device ID', device_id);\n    });\n\n    // Not Ready\n    player.current.addListener('not_ready', ({\n      device_id\n    }) => {\n      console.log('Device ID has gone offline', device_id);\n    });\n\n    // Connect to the player\n    player.current.connect();\n    return () => {\n      // Clean up on unmount\n      player.current && player.current.disconnect();\n    };\n  }, [accessToken, sdkReady]);\n  useEffect(() => {\n    if (!player.current || !trackId || !deviceId) return; // Check if the device ID is available\n\n    // Play the track using spotify-web-api-node\n    spotifyApi.current.play({\n      uris: [`spotify:track:${trackId}`]\n    }).then(function () {\n      console.log('Playback started');\n    }, function (err) {\n      console.error('Something went wrong!', err);\n    });\n  }, [trackId, deviceId]); // Add deviceId as a dependency\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '300px',\n      height: '300px',\n      backgroundColor: 'lightgray',\n      padding: '20px'\n    },\n    children: playerState && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Track: \", playerState.track_window.current_track.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Artist: \", playerState.track_window.current_track.artists[0].name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Album: \", playerState.track_window.current_track.album.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(SpotifyPlayer, \"gc2XuXshxl7l7w1igRJW4moTycg=\");\n_c = SpotifyPlayer;\nexport default SpotifyPlayer;\nvar _c;\n$RefreshReg$(_c, \"SpotifyPlayer\");","map":{"version":3,"names":["React","useEffect","useState","useRef","SpotifyWebApi","jsxDEV","_jsxDEV","SpotifyPlayer","accessToken","trackId","_s","sdkReady","setSdkReady","playerState","setPlayerState","deviceId","setDeviceId","spotifyApi","player","scriptTag","document","createElement","src","async","onload","body","appendChild","window","onSpotifyWebPlaybackSDKReady","console","log","current","setAccessToken","Spotify","Player","name","getOAuthToken","cb","addListener","message","error","state","device_id","connect","disconnect","play","uris","then","err","style","width","height","backgroundColor","padding","children","track_window","current_track","fileName","_jsxFileName","lineNumber","columnNumber","artists","album","_c","$RefreshReg$"],"sources":["/Users/dallas/BrainStation/dallas-reizevoort-capstone/dallas-reizevoort-capstone-app/src/components/SpotifyPlayer/SpotifyPlayer.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport SpotifyWebApi from 'spotify-web-api-node';\n\nfunction SpotifyPlayer({ accessToken, trackId }) {\n  const [sdkReady, setSdkReady] = useState(false);\n  const [playerState, setPlayerState] = useState(null);\n  const [deviceId, setDeviceId] = useState(null);\n  const spotifyApi = useRef(null);\n  const player = useRef(null);\n\n  useEffect(() => {\n    // Load Spotify Web Playback SDK\n    const scriptTag = document.createElement('script');\n    scriptTag.src = 'https://sdk.scdn.co/spotify-player.js';\n    scriptTag.async = true;\n    scriptTag.onload = () => setSdkReady(true);\n    document.body.appendChild(scriptTag);\n  \n    // Define the global function that the SDK calls when it's ready\n    window.onSpotifyWebPlaybackSDKReady = () => {\n      console.log('Spotify Web Playback SDK ready');\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!accessToken || !sdkReady) return;\n\n    spotifyApi.current = new SpotifyWebApi();\n    spotifyApi.current.setAccessToken(accessToken);\n\n    // Create a new player\n    player.current = new window.Spotify.Player({\n      name: 'Web Playback SDK Player',\n      getOAuthToken: cb => { cb(accessToken); }\n    });\n\n    // Error handling\n    player.current.addListener('initialization_error', ({ message }) => { console.error(message); });\n    player.current.addListener('authentication_error', ({ message }) => { console.error(message); });\n    player.current.addListener('account_error', ({ message }) => { console.error(message); });\n    player.current.addListener('playback_error', ({ message }) => { console.error(message); });\n\n    // Playback status updates\n    player.current.addListener('player_state_changed', state => {\n      console.log(state);\n      setPlayerState(state);\n    });\n\n    // Ready\n    player.current.addListener('ready', ({ device_id }) => {\n      console.log('Ready with Device ID', device_id);\n    });\n\n    // Not Ready\n    player.current.addListener('not_ready', ({ device_id }) => {\n      console.log('Device ID has gone offline', device_id);\n    });\n\n    // Connect to the player\n    player.current.connect();\n\n    return () => {\n      // Clean up on unmount\n      player.current && player.current.disconnect();\n    };\n  }, [accessToken, sdkReady]);\n\n  useEffect(() => {\n    if (!player.current || !trackId || !deviceId) return; // Check if the device ID is available\n  \n    // Play the track using spotify-web-api-node\n    spotifyApi.current.play({ uris: [`spotify:track:${trackId}`] })\n      .then(function() {\n        console.log('Playback started');\n      }, function(err) {\n        console.error('Something went wrong!', err);\n      });\n  }, [trackId, deviceId]); // Add deviceId as a dependency\n\n  \n  return (\n    <div style={{ width: '300px', height: '300px', backgroundColor: 'lightgray', padding: '20px' }}>\n      {playerState && (\n        <div>\n          <div>Track: {playerState.track_window.current_track.name}</div>\n          <div>Artist: {playerState.track_window.current_track.artists[0].name}</div>\n          <div>Album: {playerState.track_window.current_track.album.name}</div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default SpotifyPlayer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}